\NeedsTeXFormat{LaTeX2e}[2018/12/01]
\RequirePackage{expl3}
\RequirePackage{xparse}
\ProvidesExplPackage{switchcase}
  {2026/02/06}{0.1}{Switch-case implementation using expl3}
\tl_new:N \g_switchcase_cases_tl
\tl_new:N \g_switchcase_default_tl
\tl_new:N \l_switchcase_saved_cases_tl
\tl_new:N \l_switchcase_saved_default_tl
\tl_new:N \l_switchcase_input_tl
\tl_new:N \l_switchcase_tmpa_tl
\tl_new:N \l_switchcase_tmpb_tl
\box_new:N \l_switchcase_junk_box
\NewDocumentCommand{\Switch}{m +m +O{}}{
    \tl_set:Nn \l_switchcase_tmpa_tl {#1}
    \tl_trim_spaces:N \l_switchcase_tmpa_tl
    \exp_args:No \str_case:nnF { \l_switchcase_tmpa_tl } {#2} {#3}
    \ignorespaces
}
\NewDocumentCommand{\IntSwitch}{m +m +O{}}{
    \tl_set:Nn \l_switchcase_tmpa_tl {#1}
    \tl_trim_spaces:N \l_switchcase_tmpa_tl
    \exp_args:No \int_case:nnF { \l_switchcase_tmpa_tl } {#2} {#3}
    \ignorespaces
}
\NewDocumentCommand{\Case}{+m +m}{
    \tl_set:Nn \l_switchcase_tmpa_tl {#1}
    \tl_set:Nn \l_switchcase_tmpb_tl {#2}
    \tl_trim_spaces:N \l_switchcase_tmpa_tl
    \tl_trim_spaces:N \l_switchcase_tmpb_tl
    \tl_gput_right:Nx \g_switchcase_cases_tl { { \exp_not:V \l_switchcase_tmpa_tl } { \exp_not:V \l_switchcase_tmpb_tl } }
    \ignorespaces
}
\NewDocumentCommand{\Default}{+m}{
    \tl_set:Nn \l_switchcase_tmpa_tl {#1}
    \tl_trim_spaces:N \l_switchcase_tmpa_tl
    \tl_gset:NV \g_switchcase_default_tl \l_switchcase_tmpa_tl
    \ignorespaces
}
\NewDocumentEnvironment{SwitchEnv}{+m}{
    \tl_set:Nn \l_switchcase_saved_cases_tl { \g_switchcase_cases_tl }
    \tl_set:Nn \l_switchcase_saved_default_tl { \g_switchcase_default_tl }
    \tl_gclear:N \g_switchcase_cases_tl
    \tl_gclear:N \g_switchcase_default_tl
    \tl_set:Nx \l_switchcase_input_tl {#1}
    \tl_trim_spaces:N \l_switchcase_input_tl
    \vbox_set:Nw \l_switchcase_junk_box
    \ignorespaces
}{
    \vbox_set_end:
    \exp_args:Nooo \str_case:nnF { \l_switchcase_input_tl } { \g_switchcase_cases_tl } { \g_switchcase_default_tl }
    \tl_gset:Nn \g_switchcase_cases_tl { \l_switchcase_saved_cases_tl }
    \tl_gset:Nn \g_switchcase_default_tl { \l_switchcase_saved_default_tl }
    \ignorespaces
}
\NewDocumentEnvironment{SwitchIntEnv}{+m}{
    \tl_set:Nn \l_switchcase_saved_cases_tl { \g_switchcase_cases_tl }
    \tl_set:Nn \l_switchcase_saved_default_tl { \g_switchcase_default_tl }
    \tl_gclear:N \g_switchcase_cases_tl
    \tl_gclear:N \g_switchcase_default_tl
    \tl_set:Nx \l_switchcase_input_tl {#1}
    \tl_trim_spaces:N \l_switchcase_input_tl
    \vbox_set:Nw \l_switchcase_junk_box
    \ignorespaces
}{
    \vbox_set_end:
    \exp_args:Nooo \int_case:nnF { \l_switchcase_input_tl } { \g_switchcase_cases_tl } { \g_switchcase_default_tl }
    \tl_gset:Nn \g_switchcase_cases_tl { \l_switchcase_saved_cases_tl }
    \tl_gset:Nn \g_switchcase_default_tl { \l_switchcase_saved_default_tl }
    \ignorespaces
}
\endinput
%%
%% End of file `switchcase.sty'.
